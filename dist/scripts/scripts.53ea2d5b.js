"use strict";angular.module("poogleApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngGPlaces","geolocation"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("poogleApp").controller("MainCtrl",["$scope","$timeout","ngGPlacesAPI","pooUserDataFetcher","geolocation",function(a,b,c,d,e){a.getStyle=function(a){if(void 0===a||void 0===a.userData)return{};var b=a.userData.downvotes,c=a.userData.upvotes,d=Math.max(1,b+c);return{color:"rgb("+Math.floor(255*(b/d))+", "+Math.floor(255*(c/d))+", 0)"}},a.upVote=function(a){void 0===a.userData.upvotes?a.userData.upvotes=1:a.userData.upvotes+=1,a.toiletStyle="getStyle(toilet)"},a.downVote=function(a){void 0===a.userData.downvotes?a.userData.downvotes=1:a.userData.downvotes+=1,a.toiletStyle="getStyle(toilet)"},a.nearByPlaces=function(b,e){a.data=c.nearbySearch(e).then(function(b){a.data=b,b.forEach(function(a){a.userData=d.getUserDataFor()})})},e.getLocation().then(function(b){a.coords={latitude:b.coords.latitude,longitude:b.coords.longitude},a.nearByPlaces(b,a.coords)},function(b){console.log(b),a.coords={latitude:-33.8665433,longitude:151.1956316},a.nearByPlaces(a.data,a.coords)})}]),angular.module("poogleApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("poogleApp").factory("pooUserDataFetcher",function(){return this.getUserDataFor=function(){return{upvotes:0,downvotes:0}},this});